<!doctype>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Registro</title>
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">
        <link href="css/regstyle.css" rel ="stylesheet">
        
    </head>
    <body>

        <header>
         <h1>Corporativo Integral López Asociados, S.C.</h1>
        </header>

        <section id="start">
            <a href="index.html"></a>
            <div class="reg">
                <!-- <h1>Registrar</h1> -->
            </div>
                <div class="centrardiv"> 
                    <form method="post" action="./RegisterUserDEBUG">
                        <input type="text" required placeholder="Nombre" class="inp user" name="addName" id="addName">
                        <input type="text" placeholder="Usuario" class="inp user" name="addUser" id="addUser">
                        <input type="password" placeholder="Contraseña" class="inp passw" name="addPW" id="addPW">
                        <input type="password" placeholder="Confirmar Contraseña" class="inp passw" name="addPW2" id="addPW2">
                        <input type="submit" value="Crear" id="button">
                        <br>
                        <br>
                        <a href="index.html"><input type="button" value="Regresa puto" id="button"></a>
                    </form>
                <div class="login">
                    
                </div>
                <div class="reg-error"></div>
            </div>
        </section>
        
        <!-- <script>
            
           $('#button').on('click', function(){

                var error=false;

                //validate data
                if($('#addName').val()==''){
                    $('#addName').css('border-bottom','3px solid #443742');
                    error=true;
                    }
                if($('#addName').val()==''){
                    $('#addUser').css('border-bottom', '3px solid #443742');
                    error=true;
                    }
                if($('#addUser').val()==''){
                    $('#addUser').css('border-bottom', '3px solid #443742');
                    error=true;
                    }
                if($('#addPW').val()==''){
                    $('#addPW').css('border-bottom', '3px solid #443742');
                    error=true;
                    }
                if($('#addPW2').val()==''){
                    $('#addPW2').css('border-bottom', '3px solid #443742');
                    error=true;
                    }
                if(error){
                    $('.reg-error').text('Please fill every field');
                    $('.reg-error').fadeIn().css('display', 'block').delay(1000).fadeOut();
                    return false;
                    }

                    //Validate equal passwords:
                    if($('#addPW').val() != $('#addPW2').val()){
                        $('#addPW').css('border-bottom', '3px solid #443742');
                        $('#addPW2').css('border-bottom', '3px solid #443742');
                        error=true;
                    }
                    if(error){
                        $('.reg-error').text('Passwords are not the same');
                        $('.reg-error').fadeIn().css('display','block').delay(1000).fadeOut();
                        return false;
                    }
                    //If no errors, continue
                    //Check for users
                    if(store.get('tot-users')){
                        //There are already users, check if the username exists:

                        error=false;

                        for(var i=1;i<=store.get('tot-users');i++){
                            console.log(store.get('user-'+i).username);
                            if($('#addUser').val()==store.get('user-'+i).username){
                                error=true;
                                break;
                            }
                        }
                        if(error){
                            //username taken
                            $('.reg-error').text('Username already taken');
                            $('#addUser').css('border-bottom','3px solid #443742');
                            $('.reg-error').fadeIn().css('display', 'block').delay(1000).fadeOut();
                            return false;
                        }else{
                            //increment number of users and create user
                            store.set('tot-users', store.get('tot-users')+1);
                            store.set('user-'+store.get('tot-users'),
                            {username:$('#addUser').val(),
                             name:$('#addUser').val(),
                             password:$('#addPW').val(),
                             active:'true'});
    //                        Go to login screen:
                            $('register.html').fadeOut().delay(400);
                            location.replace("app.html");
                            return false;
                        }
                    }else{
                        //there are no users, create first user:
                        store.set('tot-users', 1);
                        store.set('user-1', {username:$('#addUser').val(),
                                            name:$('#addName').val(),
                                            password:$('#addPW').val(),
                                            active:'true'
                                            });
                    }
               
                            $('register.html').fadeOut().delay(400);
                            location.replace("app.html");
                            return false;
           });



        
        </script> -->
    </body>
</html>